<mxfile host="app.diagrams.net" modified="2024-10-20T00:00:00.000Z" agent="Claude Code" version="22.0.0" etag="architecture-v1">
  <diagram name="AWS Architecture" id="aws-architecture">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="ECS Managed Instance with TypeScript Monorepo on AWS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="800" height="40" as="geometry" />
        </mxCell>

        <!-- Users -->
        <mxCell id="users" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#232F3E;fillColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.users;" vertex="1" parent="1">
          <mxGeometry x="760" y="100" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="users-label" value="Users" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="770" y="190" width="60" height="20" as="geometry" />
        </mxCell>

        <!-- CloudFront -->
        <mxCell id="cloudfront-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6CC;strokeColor=#D79B00;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="640" y="250" width="320" height="140" as="geometry" />
        </mxCell>
        <mxCell id="cloudfront" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#232F3E;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.cloudfront;" vertex="1" parent="1">
          <mxGeometry x="670" y="270" width="80" height="100" as="geometry" />
        </mxCell>
        <mxCell id="cloudfront-label" value="CloudFront" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="760" y="270" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="waf" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#DD344C;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.waf;" vertex="1" parent="1">
          <mxGeometry x="820" y="270" width="50" height="50" as="geometry" />
        </mxCell>
        <mxCell id="cloudfront-features" value="- Global CDN&lt;br&gt;- WAF (Rate Limiting)&lt;br&gt;- TLS 1.2+, HTTP/3&lt;br&gt;- Origin Access Control" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="760" y="295" width="180" height="80" as="geometry" />
        </mxCell>

        <!-- VPC Container -->
        <mxCell id="vpc-container" value="" style="sketch=0;outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_vpc;strokeColor=#248814;fillColor=#E9F3E6;verticalAlign=top;align=left;spacingLeft=30;fontColor=#AAB7B8;dashed=0;" vertex="1" parent="1">
          <mxGeometry x="120" y="450" width="1360" height="680" as="geometry" />
        </mxCell>
        <mxCell id="vpc-label" value="VPC: 10.x.0.0/16" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="140" y="460" width="200" height="25" as="geometry" />
        </mxCell>

        <!-- Public Subnet -->
        <mxCell id="public-subnet" value="" style="sketch=0;outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#248814;fillColor=#E9F3E6;verticalAlign=top;align=left;spacingLeft=30;fontColor=#248814;dashed=0;" vertex="1" parent="1">
          <mxGeometry x="160" y="510" width="600" height="280" as="geometry" />
        </mxCell>
        <mxCell id="public-subnet-label" value="Public Subnets (10.x.0.0/20)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#248814;" vertex="1" parent="1">
          <mxGeometry x="180" y="520" width="250" height="20" as="geometry" />
        </mxCell>

        <!-- S3 Bucket -->
        <mxCell id="s3" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#277116;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.s3;" vertex="1" parent="1">
          <mxGeometry x="500" y="280" width="80" height="100" as="geometry" />
        </mxCell>
        <mxCell id="s3-label" value="S3 Bucket&lt;br&gt;(Static Assets)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="495" y="390" width="90" height="30" as="geometry" />
        </mxCell>

        <!-- ALB -->
        <mxCell id="alb" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#8C4FFF;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.elastic_load_balancing;" vertex="1" parent="1">
          <mxGeometry x="250" y="600" width="80" height="100" as="geometry" />
        </mxCell>
        <mxCell id="alb-label" value="Application Load Balancer" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="220" y="710" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="alb-details" value="- Health Check: /api/health&lt;br&gt;- Listener: 80→443, 443→TG&lt;br&gt;- Stickiness: 24h" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="360" y="630" width="180" height="50" as="geometry" />
        </mxCell>

        <!-- NAT Gateway -->
        <mxCell id="nat" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#8C4FFF;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.nat_gateway;" vertex="1" parent="1">
          <mxGeometry x="550" y="600" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nat-label" value="NAT Gateway" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="535" y="690" width="90" height="20" as="geometry" />
        </mxCell>

        <!-- Private Subnet -->
        <mxCell id="private-subnet" value="" style="sketch=0;outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#147EBA;fillColor=#E6F2F8;verticalAlign=top;align=left;spacingLeft=30;fontColor=#147EBA;dashed=0;" vertex="1" parent="1">
          <mxGeometry x="800" y="510" width="640" height="580" as="geometry" />
        </mxCell>
        <mxCell id="private-subnet-label" value="Private Subnets (10.x.128.0/20)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#147EBA;" vertex="1" parent="1">
          <mxGeometry x="820" y="520" width="250" height="20" as="geometry" />
        </mxCell>

        <!-- ECS Cluster -->
        <mxCell id="ecs-cluster-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF4E6;strokeColor=#FF9900;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="840" y="560" width="560" height="300" as="geometry" />
        </mxCell>
        <mxCell id="ecs-cluster" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#ED7100;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.ecs;" vertex="1" parent="1">
          <mxGeometry x="860" y="580" width="80" height="100" as="geometry" />
        </mxCell>
        <mxCell id="ecs-label" value="ECS Cluster (Managed Instance)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="950" y="580" width="260" height="20" as="geometry" />
        </mxCell>

        <!-- EC2 Instance -->
        <mxCell id="ec2-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#FF9900;" vertex="1" parent="1">
          <mxGeometry x="960" y="620" width="400" height="220" as="geometry" />
        </mxCell>
        <mxCell id="ec2" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#ED7100;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.ec2;" vertex="1" parent="1">
          <mxGeometry x="980" y="640" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ec2-label" value="Auto Scaling Group&lt;br&gt;Amazon Linux 2023 (ECS-optimized)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1050" y="640" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ec2-details" value="- Instance Type: t3.small/medium/large&lt;br&gt;- IMDSv2 Enforced&lt;br&gt;- EBS Encrypted (KMS)&lt;br&gt;- Min/Desired/Max: 0-1-3 (dev)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1050" y="675" width="290" height="60" as="geometry" />
        </mxCell>

        <!-- Frontend Container -->
        <mxCell id="frontend-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#01579B;" vertex="1" parent="1">
          <mxGeometry x="1000" y="750" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="docker-frontend" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ecs_container;" vertex="1" parent="1">
          <mxGeometry x="1010" y="760" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="frontend-label" value="Frontend&lt;br&gt;Next.js 14&lt;br&gt;Port: 3000" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1050" y="760" width="90" height="50" as="geometry" />
        </mxCell>

        <!-- Backend Container -->
        <mxCell id="backend-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#4A148C;" vertex="1" parent="1">
          <mxGeometry x="1190" y="750" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="docker-backend" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ecs_container;" vertex="1" parent="1">
          <mxGeometry x="1200" y="760" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="backend-label" value="Backend&lt;br&gt;Fastify API&lt;br&gt;Port: 3001" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1240" y="760" width="90" height="50" as="geometry" />
        </mxCell>

        <!-- VPC Endpoints -->
        <mxCell id="vpc-endpoints-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9E6;strokeColor=#995C00;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="840" y="900" width="560" height="160" as="geometry" />
        </mxCell>
        <mxCell id="vpc-endpoints-label" value="VPC Endpoints (Private Access)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="860" y="910" width="260" height="20" as="geometry" />
        </mxCell>

        <!-- ECR Endpoint -->
        <mxCell id="ecr" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#ED7100;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.ecr;" vertex="1" parent="1">
          <mxGeometry x="880" y="950" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ecr-label" value="ECR&lt;br&gt;(Docker Images)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="870" y="1035" width="80" height="20" as="geometry" />
        </mxCell>

        <!-- CloudWatch Logs -->
        <mxCell id="logs" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#759C3E;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.cloudwatch;" vertex="1" parent="1">
          <mxGeometry x="980" y="950" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="logs-label" value="CloudWatch&lt;br&gt;Logs" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="975" y="1035" width="70" height="20" as="geometry" />
        </mxCell>

        <!-- SSM -->
        <mxCell id="ssm" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#DD344C;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.systems_manager;" vertex="1" parent="1">
          <mxGeometry x="1080" y="950" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ssm-label" value="SSM&lt;br&gt;(Session Manager)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1065" y="1035" width="90" height="20" as="geometry" />
        </mxCell>

        <!-- Secrets Manager -->
        <mxCell id="secrets" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#DD344C;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.secrets_manager;" vertex="1" parent="1">
          <mxGeometry x="1180" y="950" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="secrets-label" value="Secrets&lt;br&gt;Manager" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1170" y="1035" width="80" height="20" as="geometry" />
        </mxCell>

        <!-- KMS -->
        <mxCell id="kms" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#DD344C;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.kms;" vertex="1" parent="1">
          <mxGeometry x="1280" y="950" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="kms-label" value="KMS&lt;br&gt;(Encryption)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1270" y="1035" width="80" height="20" as="geometry" />
        </mxCell>

        <!-- Monitoring & Security Section -->
        <mxCell id="monitoring-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#2E7D32;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="160" y="830" width="600" height="260" as="geometry" />
        </mxCell>
        <mxCell id="monitoring-label" value="Monitoring &amp; Security" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="180" y="840" width="200" height="20" as="geometry" />
        </mxCell>

        <!-- GuardDuty -->
        <mxCell id="guardduty" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#DD344C;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.guardduty;" vertex="1" parent="1">
          <mxGeometry x="200" y="880" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="guardduty-label" value="GuardDuty" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="195" y="965" width="70" height="20" as="geometry" />
        </mxCell>

        <!-- CloudTrail -->
        <mxCell id="cloudtrail" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#759C3E;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.cloudtrail;" vertex="1" parent="1">
          <mxGeometry x="300" y="880" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cloudtrail-label" value="CloudTrail" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="295" y="965" width="70" height="20" as="geometry" />
        </mxCell>

        <!-- X-Ray -->
        <mxCell id="xray" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#ED7100;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.x_ray;" vertex="1" parent="1">
          <mxGeometry x="400" y="880" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="xray-label" value="X-Ray" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="400" y="965" width="60" height="20" as="geometry" />
        </mxCell>

        <!-- CloudWatch Alarms -->
        <mxCell id="alarms" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#759C3E;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.cloudwatch;" vertex="1" parent="1">
          <mxGeometry x="200" y="990" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="alarms-label" value="CloudWatch&lt;br&gt;Alarms" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="190" y="1070" width="80" height="20" as="geometry" />
        </mxCell>

        <!-- Cost Management -->
        <mxCell id="budgets" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#759C3E;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.cost_and_usage_report;" vertex="1" parent="1">
          <mxGeometry x="300" y="990" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="budgets-label" value="AWS Budgets" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="295" y="1070" width="70" height="20" as="geometry" />
        </mxCell>

        <!-- CI/CD Section -->
        <mxCell id="cicd-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#6A1B9A;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="1020" y="250" width="300" height="140" as="geometry" />
        </mxCell>
        <mxCell id="github-actions" value="" style="dashed=0;outlineConnect=0;html=1;align=center;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;shape=mxgraph.webicons.github;fillColor=#000000;gradientColor=#000000" vertex="1" parent="1">
          <mxGeometry x="1040" y="270" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cicd-label" value="GitHub Actions CI/CD" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1110" y="270" width="190" height="20" as="geometry" />
        </mxCell>
        <mxCell id="cicd-details" value="- OIDC Authentication&lt;br&gt;- Lint, Test, Build&lt;br&gt;- Docker Build &amp; Push to ECR&lt;br&gt;- ecspresso Deploy&lt;br&gt;- Rolling Update" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1110" y="295" width="190" height="80" as="geometry" />
        </mxCell>

        <!-- Arrows and Connections -->
        <!-- Users to CloudFront -->
        <mxCell id="arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#232F3E;endArrow=classic;" edge="1" parent="1" source="users" target="cloudfront-box">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow1-label" value="HTTPS" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontStyle=1" vertex="1" connectable="0" parent="arrow1">
          <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- CloudFront to S3 -->
        <mxCell id="arrow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#277116;endArrow=classic;dashed=1;" edge="1" parent="1" source="cloudfront" target="s3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow2-label" value="/_next/static/*" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;" vertex="1" connectable="0" parent="arrow2">
          <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- CloudFront to ALB -->
        <mxCell id="arrow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#8C4FFF;endArrow=classic;" edge="1" parent="1" source="cloudfront-box" target="alb">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="800" y="430" />
              <mxPoint x="290" y="430" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow3-label" value="/*, /api/*" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;" vertex="1" connectable="0" parent="arrow3">
          <mxGeometry x="0.3" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- ALB to ECS -->
        <mxCell id="arrow4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#ED7100;endArrow=classic;" edge="1" parent="1" source="alb" target="ecs-cluster-box">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="450" y="650" />
              <mxPoint x="450" y="710" />
              <mxPoint x="1120" y="710" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow4-label" value="Port: 32768-65535" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;" vertex="1" connectable="0" parent="arrow4">
          <mxGeometry x="0.2" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- ECS to VPC Endpoints -->
        <mxCell id="arrow5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#995C00;endArrow=classic;dashed=1;" edge="1" parent="1" source="ec2-box" target="vpc-endpoints-box">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow5-label" value="Private Access" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;" vertex="1" connectable="0" parent="arrow5">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- GitHub Actions to ECR -->
        <mxCell id="arrow6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#6A1B9A;endArrow=classic;dashed=1;" edge="1" parent="1" source="cicd-box" target="ecr">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1170" y="450" />
              <mxPoint x="1500" y="450" />
              <mxPoint x="1500" y="990" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow6-label" value="Push Docker Image" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;" vertex="1" connectable="0" parent="arrow6">
          <mxGeometry x="0.5" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="300" height="180" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" value="Legend" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="90" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-env" value="Environment: Production" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="115" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-features" value="✓ Multi-AZ Deployment&lt;br&gt;✓ Auto Scaling (EC2 + ECS)&lt;br&gt;✓ WAF + CloudFront CDN&lt;br&gt;✓ Private Subnets&lt;br&gt;✓ VPC Endpoints (Cost Optimized)&lt;br&gt;✓ Encryption at Rest (KMS)&lt;br&gt;✓ CI/CD with GitHub Actions" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="60" y="140" width="260" height="110" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
